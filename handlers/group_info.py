from aiogram import Router, F
from aiogram.filters import Command
from aiogram.types import Message, CallbackQuery

from keyboards.inline import get_back_button
from config import GROUP_INFO

router = Router()


@router.message(Command("group"))
async def cmd_group_info(message: Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /group"""
    await show_group_info(message)


@router.callback_query(F.data == "group_info")
async def show_group_info_callback(callback: CallbackQuery):
    """–ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≥—Ä—É–ø–ø–µ —á–µ—Ä–µ–∑ callback"""
    await show_group_info(callback.message, is_callback=True)
    await callback.answer()


async def show_group_info(message: Message, is_callback: bool = False):
    """–ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≥—Ä—É–ø–ø–µ"""
    text = (
        f"üë• <b>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥—Ä—É–ø–ø–µ</b>\n\n"
        f"üìå –ù–∞–∑–≤–∞–Ω–∏–µ: <b>{GROUP_INFO['name']}</b>\n"
        f"üéì –ö—É—Ä—Å: {GROUP_INFO['course']}\n"
        f"üèõ –§–∞–∫—É–ª—å—Ç–µ—Ç: {GROUP_INFO['faculty']}\n"
        f"üë®‚Äçüéì –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤: {GROUP_INFO['students_count']}\n\n"
        f"üì± <b>–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:</b>\n"
        f"‚Ä¢ –ß–∞—Ç –≥—Ä—É–ø–ø—ã: [–¥–æ–±–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É]\n"
        f"‚Ä¢ –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –¥–µ–∫–∞–Ω–∞—Ç: [–¥–æ–±–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É]\n"
        f"‚Ä¢ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –æ–Ω–ª–∞–π–Ω: [–¥–æ–±–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É]"
    )
    
    if is_callback:
        await message.edit_text(
            text,
            reply_markup=get_back_button(),
            parse_mode="HTML"
        )
    else:
        await message.answer(
            text,
            reply_markup=get_back_button(),
            parse_mode="HTML"
        )
